<!DOCTYPE html>
<html>
<head>
  <title>Builder Office</title>
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/gantt.css">
<link rel="stylesheet" href="css/calendar.css">
  <link rel="stylesheet" href="css/status.css">


</head>
<body>

<script src="js/guard.js"></script>

<script src="js/gantt.js"></script>
<script src="js/calendar.js"></script>

<div class="app">

  <aside class="sidebar">
    <h2>Builder Office</h2>
    <nav id="nav"></nav>
  </aside>

  <section>
    <div class="topbar">
      <strong>Langley Townhouse</strong>
      <span id="userInfo"></span>
    </div>

    <div class="main" id="view"></div>
  </section>

</div>

<script src="js/router.js"></script>
<script src="js/auth.js"></script>

<script>
  const user = JSON.parse(localStorage.getItem("session"));
  document.getElementById("userInfo").innerText =
    `${user.name} (${user.role})`;

  const nav = document.getElementById("nav");

  if (user.role === "builder") {
    nav.innerHTML = `
      <a onclick="route('dashboard')">Dashboard</a>
      <a onclick="route('tasks')">Tasks</a>
      <a onclick="route('gantt')">Gantt</a>
      <a onclick="route('calendar')">Calendar</a>
      <a onclick="route('rfis')">RFIs</a>
      <a onclick="route('budget')">Budget</a>
      <a onclick="route('team')">Team</a>
      <a onclick="logout()">Logout</a>
    `;
  } else {
    nav.innerHTML = `
      <a onclick="route('dashboard')">Dashboard</a>
      <a onclick="route('tasks')">My Tasks</a>
      <a onclick="route('calendar')">Calendar</a>
      <a onclick="route('rfis')">RFIs</a>
      <a onclick="logout()">Logout</a>
    `;
  }

  route("dashboard");
</script>

</body>
</html>
